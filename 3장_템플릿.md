# 3ì¥. í…œí”Œë¦¿




## ğŸ« í…œí”Œë¦¿ ê°œìš”

### 1. í…œí”Œë¦¿ ì´ë€?

* **ì¼ì •í•œ íŒ¨í„´ìœ¼ë¡œ ìœ ì§€ë˜ëŠ” ë¶€ë¶„**ì„ **ììœ ë¡­ê²Œ ë³€í•˜ëŠ” ë¶€ë¶„**ìœ¼ë¡œë¶€í„° ë…ë¦½ì‹œì¼œì„œ íš¨ê³¼ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ë°©ë²•

* ì½”ë“œìƒì—ì„œ **ë™ì¼í•œ ë¶€ë¶„**ì„ í…œí”Œë¦¿ìœ¼ë¡œ ë§Œë“¤ì–´ **ì¬ì‚¬ìš©**í•˜ëŠ” ë°©ì‹ì´ë‹¤.


---


## ğŸ« ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„, ë³€í•˜ëŠ” ë¶€ë¶„ ë‚˜ëˆ„ê¸°

* ë³€í•˜ëŠ” ë¶€ë¶„ê³¼ ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„ì„ ë‚˜ëˆ„ëŠ” ë””ìì¸ íŒ¨í„´ìœ¼ë¡œëŠ” **í…œí”Œë¦¿ ë©”ì„œë“œ íŒ¨í„´** ê³¼ **ì „ëµ íŒ¨í„´**ì´ ìˆë‹¤.


### 1. í…œí”Œë¦¿ ë©”ì„œë“œ íŒ¨í„´

* **í…œí”Œë¦¿ ë©”ì„œë“œ íŒ¨í„´** ì—ì„œëŠ” ë³€í•˜ëŠ” ë¶€ë¶„ì„ ì¶”ìƒ ë©”ì„œë“œë¡œ ë§Œë“¤ì–´, ìì‹ í´ë˜ìŠ¤ì—ì„œ ì •ì˜í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ë‹¤.

* ì¶”ìƒ ë©”ì„œë“œë¥¼ ì •ì˜í•˜ëŠ” **ê°œìˆ˜**ë§Œí¼ ìì‹í´ë˜ìŠ¤ë¥¼ ìƒì„±í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ë¹„íš¨ìœ¨ ì ì´ë‹¤.


### 2. ì „ëµ íŒ¨í„´

* **ì „ëµ íŒ¨í„´** ì—ì„œëŠ” ë³€í•˜ëŠ” ë¶€ë¶„ì„ ì¸í„°í˜ì´ìŠ¤ë¡œ ë§Œë“¤ê³ , í•„ìš”í•œ ì •ì˜ë§Œí¼ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ë‹¤.

* **í…œí”Œë¦¿ ë©”ì„œë“œ íŒ¨ë˜**ê³¼ ë‹¤ë¥¸ì ì€, ì¸í„°í˜ì´ìŠ¤ë¡œ ë½‘ì•„ë‚¸ **ë³€í•˜ëŠ” ë¶€ë¶„**ì€ ìµëª… í´ë˜ìŠ¤ë¡œ ì‘ì„±í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì´ë‹¤.

* **ë³€í•˜ëŠ” ë¶€ë¶„**ì„ ìµëª… í´ë˜ìŠ¤ë¡œ ë§Œë“¤ ê²½ìš°, ì¶”ê°€ì ì¸ í´ë˜ìŠ¤ íŒŒì¼ì´ í•„ìš”ì—†ì–´ì„œ, **í…œí”Œë¦¿ ë©”ì„œë“œ íŒ¨í„´**ë³´ë‹¤ íš¨ìœ¨ì ì´ë‹¤.


### 3. ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„ í´ë˜ìŠ¤ë¡œ ì¶”ì¶œí•˜ê¸°

1. ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„ì€ **ë³€í•˜ëŠ” ë¶€ë¶„**ì„ **ì „ëµíŒ¨í„´**ì˜ ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•˜ê²Œ ë§Œë“ ë‹¤.

1. ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„ì´ ë‹¤ë¥¸ í´ë˜ìŠ¤ì—ì„œë„ ì‚¬ìš©ëœë‹¤ë©´, **ê°œë³„ í´ë˜ìŠ¤**ë¡œ ìƒì„±í•˜ë©´, ì¬ì‚¬ìš©ìœ¨ì´ í¬ê²Œ ì¦ê°€í•œë‹¤.


### 4. íë¦„ ì‚´í´ë³´ê¸°

* ë‹¤ìŒê³¼ ê°™ì€ *ì˜ˆ* ì—ì„œ íë¦„

    * DAO : **í´ë¼ì´ì–¸íŠ¸**

    * ë³€í•˜ëŠ” ë¶€ë¶„ : **ê°œë³„ ì „ëµ**

    * ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„ : **ì»¨í…ìŠ¤íŠ¸**

* **í´ë¼ì´ì–¸íŠ¸** ê°€ **ì»¨í…ìŠ¤íŠ¸**ì— **ê°œë³„ì „ëµ**ì„ ì‚¬ìš©í•˜ì—¬ **ë©”ì‹œì§€ ì „ë‹¬**

* ë§Œì•½, **ì»¨í…ìŠ¤íŠ¸**(ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„)ì´ í…ŒìŠ¤íŠ¸ ë‹¨ê³„ì™€ ìš´ìš©ë‹¨ê³„ ë‘˜ ë‹¤ ë³€ê²½í•  ì´ìœ ê°€ ì—†ë‹¤ë©´, ì¸í„°í˜ì´ìŠ¤ ì—†ì´ **Bean(ë¹ˆ)**ìœ¼ë¡œ ì‚¬ìš©í•´ë„ ê´œì°®ë‹¤.

* ë‹¨, ìŠ¤í”„ë§ì˜ DIëŠ” ëŸ°íƒ€ì„ ì˜ì¡´ê´€ê³„ë¥¼ ë§Œë“œëŠ”ê²Œ ì£¼ ëª©ì ì´ê¸° ë•Œë¬¸ì—, ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•˜ë„ë¡ í•œ í›„, ì°¨í›„ì— ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚­ì œí•˜ì—¬ ê°•í•œ ê²°í•©ìœ¼ë¡œ ë§Œë“¤ì§€ ê²°ì •í•˜ëŠ”ê²ƒì´ ì¤‘ìš”í•˜ë‹¤. (ê·€ì°®ì•„ì„œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì•Šì“°ëŠ” ê²ƒì€ ìµœì•…ì˜ ì‹œë‚˜ë¦¬ì˜¤)


> ì–´ì°¨í”¼ **í´ë¼ì´ì–¸íŠ¸**ì— **ì»¨í…ìŠ¤íŠ¸**ë¥¼ êµ¬ì²´í´ë˜ìŠ¤ë¡œ DIí•  ê²ƒì´ë¼ë©´, **ìˆ˜ë™ DI**ë¡œ ë§Œë“œëŠ” ë°©ë²•ë„ ìˆë‹¤.

* **í´ë¼ì´ì–¸íŠ¸**ëŠ” **ì»¨í…ìŠ¤íŠ¸**ì˜ êµ¬ì²´ í´ë˜ìŠ¤ë¥¼ ì´ë¯¸ ì•Œê³  ìˆê¸° ë•Œë¬¸ì—, **í´ë¼ì´ì–¸íŠ¸** ë‚´ë¶€ì—ì„œ ì§ì ‘ ìƒì„±í•´ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ë‹¤.

* ë§Œì•½ **ì»¨í…ìŠ¤íŠ¸**ì— DI í•´ì¤„ í”„ë¡œí¼í‹°ê°€ ìˆë‹¤ë©´, **í´ë¼ì´ì–¸íŠ¸**ê°€ DIë°›ì•„ì„œ ì§ì ‘ **ì»¨í…ìŠ¤íŠ¸**ì— DI í•´ì£¼ë©´ ëœë‹¤.

> **í´ë¼ì´ì–¸íŠ¸**ì™€ **ì»¨í…ìŠ¤íŠ¸**ì˜ **ê°•í•œê²°í•©**ë°©ì‹ì€, ì´ìœ ì™€ ê·¼ê±°ê°€ ìˆì„ë•Œë§Œ ì‚¬ìš©í•´ì•¼ í•œë‹¤. ì•„ë‹ˆë¼ë©´ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë‘” DIë¥¼ ì‚¬ìš©í•˜ì.


---


## ğŸ« í…œí”Œë¦¿/ì½œë°± íŒ¨í„´

* ì „ëµíŒ¨í„´ê³¼ ìœ ì‚¬í•˜ì§€ë§Œ, í•„ìš”í•œ ì „ëµë§Œí¼ì˜ í´ë˜ìŠ¤ë¥¼ ë§Œë“œëŠ” ê²ƒì´ ì•„ë‹ˆë¼, **ìµëª…í´ë˜ìŠ¤**ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ë‹¤.

* í…œí”Œë¦¿ê³¼ ì½œë°±ì˜ ì˜ë¯¸ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

    * í…œí”Œë¦¿ : ê³ ì •ëœ ë¡œì§ (ë³€ê²½ìš”ì†Œê°€ ì•„ë‹Œ, ë™ì¼í•œ ë™ì‘ë¶€ë¥¼ ì¶”ì¶œí•œ ê²ƒì„ ë§í•œë‹¤)

    * ì½œë°± : ì „ëµíŒ¨í„´ì˜ ì „ëµì— í•´ë‹¹í•˜ëŠ” ìš”ì†Œë¡œì¨, **ë³€í•˜ëŠ” ë¶€ë¶„**ì„ í•„ìš”ì— ë”°ë¼ ì •ì˜í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ë¶€ë¶„ì´ë‹¤.

* ë³€í•˜ì§€ ì•ŠëŠ” **í…œí”Œë¦¿**ì„ ìµœëŒ€í•œìœ¼ë¡œ ë§Œë“¤ ìˆ˜ë¡, **ë¡œì§**ì— í•´ë‹¹í•˜ëŠ” **ì½œë°±**ì´ **ëª…í™•í•œ ë¡œì§**ìœ¼ë¡œ ë§Œë“¤ì–´ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. (ë§¤ìš° ì¤‘ìš”)


---


## ğŸ« JdbcTemplate

* JDBCë¥¼ ìœ„í•´ ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” í…œí”Œë¦¿/ì½œë°± íŒ¨í„´

* ìŠ¤í”„ë§ì˜ **JdbcTempate** ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

* ë‚´ë¶€ì—ì„œ ìì›ê´€ë¦¬ë¥¼ í•´ì£¼ê¸° ë•Œë¬¸ì—, close()ë‚˜ try ~ catch ~ finallyëŠ” ì‘ì„±í•  í•„ìš” ì—†ë‹¤.

> ### JdbcTemplateê°ì²´ëŠ” DIì»¨í…Œì´ë„ˆê°€ í•„ìš”ì—†ê³ , í•„ìš”í•œ ê³³ì—ì„œ ê°ì²´ìƒì„±(new)í•´ì„œ ì‚¬ìš©í•˜ë©´ ëœë‹¤.


## ğŸ« JdbcTemplateê°ì²´ì˜ **update()** ë©”ì„œë“œ

### ğŸ« update()

* Connectionê°ì²´ì˜ executeUpdate() ë™ì‘ì„ ìœ„í•œ í…œí”Œë¦¿/ì½œë°± íŒ¨í„´ì˜ ë©”ì„œë“œ(í…œí”Œë¦¿)ë‹¤.

* ì‚¬ìš©ë²•

    ```java
        JdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);
        jdbcTemplate.update("DELETE FROM users");
    ```


---


### ğŸ« queryForInt()

* ResultSetì˜ ê²°ê³¼ê°€ ë‹¨ì¼ ì •ìˆ˜í˜•ì¼ ê²½ìš°ì— ì‚¬ìš©í•˜ëŠ” í…œí”Œë¦¿/ì½œë°± íŒ¨í„´ì˜ ë©”ì„œë“œë‹¤.

* ì‚¬ìš©ë²•

    ```java
        JdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);
        int result = jdbcTemplate.queryForInt("SELECT COUNT(*) FROM users");
    ```


---


### ğŸ« queryForObject()

* ResultSetì˜ ê²°ê³¼ë¥¼ VOê°ì²´ë¡œ ë°˜í™˜í•˜ëŠ” í…œí”Œë¦¿/ì½œë°± íŒ¨í„´ì˜ ë©”ì„œë“œ(í…œí”Œë¦¿)ë‹¤.

* queryForObject()ëŠ” ë‹¨ì¼ íŠœí”Œì— ëŒ€í•œ ë©”ì„œë“œì´ë¯€ë¡œ, ê²°ê³¼ì—­ì‹œ ê°ì²´ í•˜ë‚˜ê°€ ëœë‹¤

* RowMapì¸í„°í˜ì´ìŠ¤ì˜ êµ¬í˜„ì—ì„œëŠ” ResultSetì˜ **resultSet.next()**ë¥¼ í•˜ì§€ ì•Šì•„ì•¼ í•œë‹¤. (ë‚´ë¶€ì—ì„œ **resultSet.next()**ë¥¼ ì‹¤í–‰ í›„, ì¸ìë¡œ ë„˜ê¸°ê¸° ë•Œë¬¸)

* ì¿¼ë¦¬ì˜ ê²°ê³¼ê°€ ì—†ë‹¤ë©´, **EmptyResultDataAccessException**ì„ throw í•œë‹¤.

* RowMapperì˜ ì œë„¤ë¦­ íƒ€ì…ì´ queryForObjectì˜ ë°˜í™˜íƒ€ì…ì´ ëœë‹¤.

* RowMapperì˜ ì¸ìê°’

    * ResultSet

    * Object[] : ì¿¼ë¦¬ì˜ ì¹˜í™˜ì(?)ì˜ ìˆœì„œì— ë§ê²Œ ì €ì¥ëœ ë°°ì—´

    * RowMapper : ê°ê°ì˜ ResultSetê°ì²´.next() ì—ì„œ í˜¸ì¶œë˜ëŠ” ì½œë°± ë©”ì„œë“œ

* ì‚¬ìš©ë²•

    ```java
        JdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);
        User user = jdbcTemplate.queryForObject("SELECT * FROM users WHERE id=?", 
                    new Object[] {"ì•„ì´ë””"},
                    new RowMapper<User>() {
            @Override
            public User mapRow(ResultSet rs, int rowNum) throws SQLException {
                User user = new User();
                user.setId(rs.getString("id"));
                user.setName(rs.getString("name"));
                user.setPassword(rs.getString("password"));

                return user;
            }
        });

    ```


---


### ğŸ« query()

* ResultSetì˜ ê²°ê³¼ë¥¼ **List<VOê°ì²´>**ë¡œ ë°˜í™˜í•˜ëŠ” í…œí”Œë¦¿/ì½œë°± íŒ¨í„´ì˜ ë©”ì„œë“œ(í…œí”Œë¦¿)ì´ë‹¤.

* queryForObject()ì™€ ê°™ì´ **resultSet.next()**ëŠ” ë‚´ë¶€ì—ì„œ ë™ì‘í•œë‹¤. (ë³„ë„ ì‚¬ìš© í•„ìš”ì—†ìŒ)

* SQLì˜ ë°”ì¸ë”©ì´ í•„ìš” ì—†ë‹¤ë©´, ë‘ë²ˆì§¸ ì¸ìì¸ Object[]ëŠ” ìƒëµê°€ëŠ¥í•˜ë‹¤.

* ì„¸ë²ˆì§¸ ì¸ìì¸ RowMapperëŠ” queryForObjectì™€ ë™ì¼í•˜ê²Œ êµ¬í˜„í•˜ë©´ ëœë‹¤.

* ì¿¼ë¦¬ì˜ ê²°ê³¼ê°€ ì—†ë‹¤ë©´, í¬ê¸°ê°€ 0ì¸ Listë¥¼ ë°˜í™˜í•œë‹¤.

* ì‚¬ìš©ë²•

    ```java
        JdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);
        List<User> users = jdbcTemplate.query("SELECT * FROM users", 
                    new RowMapper<User>() {
            @Override
            public User mapRow(ResultSet rs, int rowNum) throws SQLException {
                User user = new User();
                user.setId(rs.getString("id"));
                user.setName(rs.getString("name"));
                user.setPassword(rs.getString("password"));

                return user;
            }
        });
    ```