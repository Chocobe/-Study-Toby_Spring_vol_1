# 5장. 서비스 추상화




## 🐫 Enum

* 상태값을 위한 상수를 사용할 경우, 값의 유효성을 검증할 수 없고, IDE의 도움을 받을 수 없다.

* 위의 문제점을 해결할 수 있는 방법이 바로 **Enum**이다.

* **Enum** 역시 클래스이며, 다음과 같은 특징이 있다.

    1. 생성자는 **private** 으로만 만들어야 한다.

    1. Enum객체는 각각의 **상수값**을 가질 수 있다.

    1. Enum객체는 인덱스 번호를 가진다.

* JAVA API에서 지원하는 Enum 메서드

    1. **Enum명.values()** : Enum의 모든 요소를 배열(``Enum명[]``)로 반환

    ```java
        enum Color {
            RED, GREEN, YELLOW;
        }
    ```

    ```java
        Color[] arr = Color.values();
    ```

    1. **Enum객체.ordinal()** : 해당 Enum객체의 인덱스값

    ```java
        Color myColor = Color.RED;
        System.out.println(myColor + "의 인덱스 : " + myColor.ordinal());

        // RED의 인덱스 : 0
    ```

    1. **Enum.valueOf("enum명")** : 인자의 enum이 존재한다면, 해당 enum의 문자열을 반환

    ```java
        System.out.println("결과 : " + Color.valueOf("YELLOW"));

        // 결과 : YELLOW
    ```


>   ### 🐫 Enum 만들기

* JAVA API가 제공하는 메서드가 아닌 직접 만들어 사용하는 방법

    ```java
        public enum Level {
            // 소괄호를 사용하여 상수값을 지정할 경우에는
            // enum 생성자가 필수이다. (private생성자)
            BASIC(1), SILVER(2), GOLD(3);

            private int value;

            // Enum의 생성자는 private 으로 만들어야 한다.
            // 또한 생성자는 컴파일 시점에서 호출되기 때문에, private으로 생성해야 한다.
            private Level(int value) {
                this.value = value;
            }

            // enum객체의 상수값 GETTER
            public int getIntValue() {
                return this.value;
            }

            // 상수에 해당하는 enum객체 가져오기 (static 메서드)
            public static Level valueOf(int value) {
                switch(value) {
                    case 1: return Level.BASIC;
                    case 2: return Level.SILVER;
                    case 3: return Level.GOLD;
                    default: throw new AssertionError("Unkown Value : " + value);
                }
            }
        }
    ```

* 위의 코드에서 enum요소들에 **상수값**을 할당하게 되면, 상수값의 **타입**을 인자로 받는 **생성자**를 필수로 작성해야 한다.

* Enum은 컴파일시점에서 생성되기 때문에 생성자는 **private**이 되고, 할당되는 상수값의 **타입**을 받는 **생성자**가 필요하게 되는 것이다.

* 위의 코드에서 Enum의 사용처는 총 3가지이다.

    1. POJO에서 직관적인 값을 사용할 수 있다.

    ```java
        Level level = Level.GOLD;
        // 변수 level에 골드(GOLD) enum을 할당한다.
    ```

    1. POJO -> DB로 값을 저장하기 위해 enum에서 값을 추출하여 사용할 수 있다.

    ```java
        Level level = Level.GOLD;
        int intValue = level.getIntValue();
    ```

    1. DB -> POJO로 값을 가져올 때, 해당 값에 대한 enum값을 실수없이 변환할 수 있다.

    ```java
        int intLevel = resultSet.getInt("level");
        Level level = Level.valueOf(intLevel);
    ```